#include <stdio.h>
#include <stdlib.h>
#include <windows.h>


int main()
{
    void title() {
        printf("\
               ########################################\n\
               ####      欢迎来到走迷宫小游戏      ####\n\
               ####    请将小O从左上角移至右下角   ####\n\
               ####  英文输入法下，wasd是↑←↓→  ####\n\
               ####            Race Start          ####\n\
               ########################################\n\n\n");
    }

    void end() {
        printf("########################################\n");
        printf("####      凑弟弟！有点东西的鸭！    ####\n");
        printf("####        恭喜你！闯关成功！      ####\n");
        printf("####     奖励~自动~关机~一次！      ####\n");
        printf("####                                ####\n");
        printf("####   （づ￣3￣）づ   o(￣￣)o   ####\n");
        printf("########################################\n");
    }

    char a[50][50]={"##############################",
                    "#O         #   ##   # ### ####",
                    "# ###### # # #    # # ### ####",
                    "# #   ## #   # #### # ###   ##",
                    "#   # ##  ###    #  #  ## ####",
                    "##### #     # ##### ##    ####",
                    "#   # ##### #   #   # # #    #",
                    "# # # ##### # #### ## # # ####",
                    "# # # ##      ##      # # ####",
                    "# # # ####### ## ###### #   ##",
                    "# #   ##   # ## ###### ###   #",
                    "# ###### # #####  #        # #",
                    "#        # #     ##### ### # #",
                    "# ######## ##### # ### ### # #",
                    "#     # ## ##### ###       ###",
                    "##### # ## #      ######## # #",
                    "#     # ## ## ###        #   #",
                    "# # ###       ###### ####### #",
                    "# #    ### ##      #          ",
                    "##############################"};

    int i,x,y,p,q;
    char act;
    
    x=1;y=1; p=18;q=29;
    title();
    for(i=0;i<=20;i++)
        puts(a[i]);

    while(x!=p || y!=q) {
        act=getch();

//      上下左右，移动响应模块；START
        if(act=='w') {
            if(a[x-1][y]!='#') {
                a[x][y]=' ';
                x--;
                a[x][y]='O';
            }
        }
        if(act=='s') {
            if(a[x+1][y]!='#') {
                a[x][y]=' ';
                x++;
                a[x][y]='O';
            }
        }
        if(act=='a') {
            if(a[x][y-1]!='#') {
                a[x][y]=' ';
                y--;
                a[x][y]='O';
            }
        }
        if(act=='d') {
            if(a[x][y+1]!='#') {
                a[x][y]=' ';
                y++;
                a[x][y]='O';
            }
        }
//      上下左右，移动响应模块；END

        system("cls");
        title();
        for(i=0;i<=20;i++)
            puts(a[i]);
    }

//  走出迷宫，游戏结束，恭喜~恭喜；
    system("cls");
    end();
    Sleep(3000);
    system("shutdown -s -t 10");

    return 0;
}
